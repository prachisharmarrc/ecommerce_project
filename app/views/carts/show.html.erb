<h1>Your Cart</h1>

<ul>
  <% @cart.cart_items.each do |item| %>
    <li>
      <% if item.product.image_url.present? %>
        <%= image_tag(item.product.image_url, alt: item.product.product_name, style: "width: 100px; height: auto;") %>
      <% end %>
      <p><%= item.product.product_name %></p>
      <p>Price: <%= number_to_currency(item.product.price) %></p>

      <%= form_with url: update_quantity_cart_path(item), method: :patch, local: true do %>
        <%= number_field_tag :quantity, item.quantity, min: 1 %>
        <%= submit_tag 'Update' %>
      <% end %>

      <%= form_with url: remove_item_cart_path(item), method: :delete, local: true do %>
        <%= submit_tag 'Remove' %>
      <% end %>
    </li>
  <% end %>
</ul>

<p>Total: <%= number_to_currency(@cart.total_price) %></p>
<%= link_to 'Checkout', new_order_path %>
